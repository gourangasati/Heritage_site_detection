{% extends 'base.html' %}

{% block title %}Book a Guide - Heritage Detector{% endblock %}

{% block extra_css %}
<style>
    .guide-hero {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: white;
        padding: 3rem 0;
        border-radius: 20px;
        margin-bottom: 3rem;
        text-align: center;
    }

    .booking-form {
        background: white;
        border-radius: 20px;
        padding: 3rem;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-label {
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
    }

    .form-control, .form-select {
        border-radius: 10px;
        border: 2px solid var(--light-bg);
        padding: 12px;
        transition: all 0.3s;
    }

    .form-control:focus, .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.2rem rgba(139, 69, 19, 0.25);
    }

    .success-message {
        background: var(--success);
        color: white;
        padding: 2rem;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 2rem;
    }

    .guide-features {
        background: var(--light-bg);
        border-radius: 15px;
        padding: 2rem;
        margin-top: 2rem;
    }

    .feature-item {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
    }

    .feature-item i {
        color: var(--primary-color);
        margin-right: 10px;
        font-size: 1.2rem;
    }
</style>
{% endblock %}

{% block content %}

{% if booking_success %}
<div class="success-message">
    <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
    <h3>Booking Confirmed!</h3>
    <p>Your guide booking for <strong>{{ booking_details.site_name }}</strong> has been confirmed.</p>
    <p>Visitor: <strong>{{ booking_details.visitor_name }}</strong></p>
    <p>Visit Date: <strong>{{ booking_details.visit_date }}</strong></p>
    <p class="mt-3">You will receive a confirmation email shortly.</p>
</div>
{% endif %}

{% if booking_error %}
<div class="alert alert-danger" role="alert">
    <i class="fas fa-exclamation-circle"></i> {{ booking_error }}
</div>
{% endif %}

{% if form_errors %}
<div class="alert alert-danger" role="alert">
    <i class="fas fa-exclamation-circle"></i> Please correct the errors below:
    <ul class="mb-0 mt-2">
        {% for field, errors in form_errors.items %}
            {% for error in errors %}
                <li>{{ field }}: {{ error }}</li>
            {% endfor %}
        {% endfor %}
    </ul>
</div>
{% endif %}

<div class="row">
    <div class="col-md-8">
        <div class="booking-form">
            <h3 class="mb-4"><i class="fas fa-calendar-check"></i> Guide Booking Form</h3>
            <form method="POST" action="{% url 'guide' %}">
                {% csrf_token %}
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-monument"></i> Select Heritage Site</label>
                    <select class="form-select" name="site_name" required>
                        <option value="">Choose a heritage site...</option>
                        {% for site in heritage_sites %}
                        <option value="{{ site.name }}">{{ site.name }} - {{ site.location }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-user"></i> Your Name</label>
                            <input type="text" class="form-control" name="visitor_name" required placeholder="Enter your full name">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-envelope"></i> Email</label>
                            <input type="email" class="form-control" name="email" required placeholder="your.email@example.com">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-phone"></i> Phone Number</label>
                            <input type="tel" class="form-control" name="phone" required placeholder="+91 1234567890">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-calendar"></i> Visit Date</label>
                            <input type="date" class="form-control" name="visit_date" required>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-users"></i> Group Size</label>
                            <select class="form-select" name="group_size" required>
                                <option value="">Select group size...</option>
                                <option value="1">1 person</option>
                                <option value="2-5">2-5 people</option>
                                <option value="6-10">6-10 people</option>
                                <option value="11-20">11-20 people</option>
                                <option value="20+">20+ people</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-language"></i> Preferred Language</label>
                            <select class="form-select" name="language" required>
                                <option value="">Select language...</option>
                                <option value="English">English</option>
                                <option value="Hindi">Hindi</option>
                                <option value="Marathi">Marathi</option>
                                <option value="Gujarati">Gujarati</option>
                                <option value="Tamil">Tamil</option>
                                <option value="Telugu">Telugu</option>
                                <option value="Bengali">Bengali</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label"><i class="fas fa-comment"></i> Special Requirements (Optional)</label>
                    <textarea class="form-control" name="special_requirements" rows="3" placeholder="Any special requirements or requests..."></textarea>
                </div>

                <button type="submit" class="btn btn-primary btn-lg w-100">
                    <i class="fas fa-check"></i> Book Guide
                </button>
            </form>
        </div>
    </div>

    </div>
</div>
{% endblock %}
